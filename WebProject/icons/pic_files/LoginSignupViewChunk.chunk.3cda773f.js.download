(window.__LOADABLE_LOADED_CHUNKS__=window.__LOADABLE_LOADED_CHUNKS__||[]).push([[121],{1246:function(e,t,r){"use strict";r.r(t),r.d(t,"LoginSignupView",(function(){return Ue}));var n=r(0),a=r(31),o=r(9),i=r.n(o),l=r(149),c=r.n(l),s=r(2),u=r.n(s),p=r(110),d=r(64),f=r(198),m=function(e){var t=e.styles,r=e.message,a=void 0===r?"":r,o=i()(t["submit-btn"],t["white-btn"],t["info-contact-btn"]);return n.createElement("div",{className:t["info-container"]},n.createElement("div",{className:t["info-title"]},n.createElement(d.a,{strKey:"loginVerificationBlockedTitle"})),n.createElement("div",{className:t["info-msg"]},a),n.createElement("div",{className:t["info-help-wrapper"]},n.createElement("div",{className:t["info-help-txt"]},n.createElement(d.a,{strKey:"loginVerificationBlockedHelpText"})),n.createElement(f.a,{external:!0,href:"/helpcentre",className:o},n.createElement(d.a,{strKey:"contactUs"}))))},g=r(932),b=r(16),v=r(123),y=r(215),h=r(307),O=r(265),w=r(128),E=r(55),S=r(269),P=r(48),N=r(84),I=r(103),T=r(260),_=r(239),j=r(469);function x(e){return x="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},x(e)}function C(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,k(n.key),n)}}function k(e){var t=function(e,t){if("object"!=x(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=x(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==x(t)?t:t+""}function R(e,t,r){return t=A(t),function(e,t){if(t&&("object"==x(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,L()?Reflect.construct(t,r||[],A(e).constructor):t.apply(e,r))}function L(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(L=function(){return!!e})()}function A(e){return A=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},A(e)}function D(e,t){return D=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},D(e,t)}var K=function(e){function t(e){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(r=R(this,t,[e])).generateOTP=function(e){var t=r.state.mobileNumber,n=r.props,a=n.handleAPIRequest,o=n.handleAPIError,i=n.changeViewHandler,l=n.toast,c=n.compactView,s=Object(p.h)(t)?"+91".concat(t):t,u=c&&!e.signup,d=u?{loginId:s}:"loginId=".concat(s);a(u?O.d:O.c,d,(function(r){l.show(j.verificationCodeSentMsg,{userName:t}),i(u?{view:_.a.LOGIN,extra:Object.assign({userName:t,payload:r},e)}:{view:_.a.VERIFICATION,extra:Object.assign({userName:t,payload:r},e)})}),o,"new_otp_sent")},r.handleSubmit=function(e){e&&e.preventDefault();var t=r.state,n=t.mobileNumber,a=t.extra,o=r.props,i=o.handleAPIRequest,l=o.handleAPIError,c=o.changeViewHandler,s=o.compactView,d=o.trackOmniture,f=o.pageType,m=o.loginSource;if(r.validateAllFields()){var g=Object(p.h)(n)?"+91".concat(n):n;i(h.b,{loginId:[g],supportAllStates:!0},(function(e){var t=u()(e,["data","userDetails",g]);t===w.d||t===w.b?s&&Object(p.f)(n)?(d("email_signup",{pageType:f,loginSource:m}),c({view:_.a.SIGNUP,extra:{emailId:n}})):(d("mobile_signup",{pageType:f,loginSource:m}),r.generateOTP({signup:!0,emailId:a.emailId,accountState:t}),d("otp_requested",{pageType:f,loginSource:m})):s?(d("checkout_password_shown",{pageType:f,loginSource:m,loginId:Object(S.b)(n)}),t===w.c?l("loginDeactivatedUserNew"):t===w.a?l("loginChurnedUserNew"):(r.generateOTP({emailId:a.emailId,accountState:t}),c({view:_.a.LOGIN,extra:{userName:n}}))):(d("user_registered",{pageType:f,loginSource:m}),c({view:_.a.LOGIN,extra:{userName:n}}),l("loginRegisteredUserMsg"))}),(function(e){return l(e,"signup_failed")}),"signup_btn_clicked")}else d("invalid_email_mobile",{pageType:f,loginSource:m,loginId:Object(S.b)(n)});return!1},r.handleTextChange=function(e){var t=r.props,n=t.compactView,a=!t.extra.emailId&&n?e:e.replace(p.b,"");return r.setState({mobileNumber:Object(E.f)(a),invalidMobileNumber:""}),a},r.handleClick=function(e){var t=r.props,n=t.viewType,a=t.changeViewHandler;n!==w.q&&a({view:_.a.LOGIN,extra:{userName:r.state.mobileNumber}},e)},r.validateAllFields=function(){var e=r.state.mobileNumber,t=r.props,a=t.compactView,o=t.extra;if(a&&!o.emailId){var i=Object(p.c)(e)?Object(p.h)(e):Object(p.f)(e);return!i&&r.setState({invalidMobileNumber:n.createElement(b.a,{strKey:"loginInvalidUserName"})}),i}return!!Object(p.h)(e)||(r.setState({invalidMobileNumber:n.createElement(b.a,{strKey:"loginInvalidMobileNumber"})}),!1)},r.handleOnFocus=function(){var e=r.props,t=e.showModal,n=e.toast,a=e.makeLoginRequest,o=e.compactView,i=e.viewType,l=e.handleLoginSuccess,c=e.pageType;if(0===r.count&&o&&c===w.n){var s={showModal:t,toast:n,makeLoginRequest:a,omnitureData:{source:"checkout",page:"checkout"},view:i,handleLoginSuccess:l};Object(T.b)(s),r.count++}},r.handleEmailIdChange=function(e){e&&e.preventDefault(),(0,r.props.changeViewHandler)({view:_.a.SIGNUP,extra:{}})},r.state={mobileNumber:u()(e,"extra.mobileNumber",""),extra:e.extra},r.count=0,r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&D(e,t)}(t,e),r=t,(a=[{key:"UNSAFE_componentWillReceiveProps",value:function(e){this.setState({mobileNumber:u()(e,"extra.mobileNumber",""),extra:e.extra||{},invalidMobileNumber:""})}},{key:"render",value:function(){var e=this.state,t=e.invalidMobileNumber,r=e.mobileNumber,a=e.extra,o=u()(a,["emailId"]),l=this.props,c=l.styles,s=l.compactView,d=s&&!o?Object(p.h)(r):!!r,m=s&&!o?"loginPlaceHolderUserName":"loginPlaceHolderMobile";return n.createElement("form",{onSubmit:this.handleSubmit},o&&n.createElement("div",null,n.createElement(g.a,{value:o,readOnly:!0,appendInfo:!0,className:c["form-input"],wrapperClass:c["form-input-wrap"]},n.createElement("a",{href:"javascript:void(0);",className:i()(c["append-txt"],c["input-action-txt"]),onClick:this.handleEmailIdChange,tabIndex:-1},n.createElement(b.a,{strKey:"loginChangeUserNameTxt"})))),n.createElement(g.a,{maxLength:s&&!o?"auto":10,value:r,captureAutoFill:!0,prependInfo:d,errorMsg:t,autoFocus:!s,tabIndex:"1",onFocus:this.handleOnFocus,placeholder:n.createElement(b.a,{strKey:m}),onTextChange:this.handleTextChange,className:c["form-input"],wrapperClass:c["form-input-wrap"]},d?n.createElement("span",{className:c["prepend-txt"]},"+91"):null),n.createElement("div",{className:c["terms-text"]},"By continuing, you agree to Flipkart's"," ",n.createElement(P.a,{to:"/pages/terms",className:c["terms-color"],target:"_blank"},"Terms of Use")," ","and"," ",n.createElement(P.a,{to:"/pages/privacypolicy",className:c["terms-color"],target:"_blank"},"Privacy Policy"),"."),n.createElement("div",{className:c["form-btn-wrap"]},n.createElement(f.a,{type:"submit",secondary:!0,className:c["submit-btn"]},n.createElement(v.a,{stroke:"#fff",className:c["loader-icon"]}),n.createElement(b.a,{strKey:"continueText"})),!s&&n.createElement(f.a,{href:w.s,className:i()(c["submit-btn"],c["white-btn"],c["change-view-btn"]),onClick:this.handleClick},n.createElement(b.a,{strKey:"loginAlreadyHaveAccountBtnMsg"}))))}}])&&C(r.prototype,a),o&&C(r,o),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,a,o}(n.Component);K.defaultProps={extra:{},trackOmniture:function(){return null}};var U={showModal:I.d,makeLoginRequest:y.b},M=Object(a.b)(null,U)(Object(N.d)(K)),F=r(566),V=r(332),B=r(1101),G=r(78);function q(e){return q="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},q(e)}function H(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,W(n.key),n)}}function W(e){var t=function(e,t){if("object"!=q(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=q(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==q(t)?t:t+""}function Q(e,t,r){return t=$(t),function(e,t){if(t&&("object"==q(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,Z()?Reflect.construct(t,r||[],$(e).constructor):t.apply(e,r))}function Z(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(Z=function(){return!!e})()}function $(e){return $=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},$(e)}function X(e,t){return X=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},X(e,t)}var z=function(e){function t(e){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(r=Q(this,t,[e])).onTextChange=function(e){r.setState(e)},r.validateAllFields=function(){var e=r.state,t=e.userName,a=e.password,o=!0,i=Object(p.c)(t),l=r.props,c=l.pageType,s=l.loginSource;return i&&!Object(p.h)(t)||!i&&!Object(p.f)(t)?(r.props.trackOmniture((t||"").length>0?"invalid_email_mobile":"",{pageType:c,loginSource:s,loginId:Object(S.b)(t)}),r.setState({credentialError:n.createElement(b.a,{strKey:"loginInvalidUserName"})}),o=!1):a||(r.props.trackOmniture("empty_pwd",{pageType:c,loginSource:s,loginId:Object(S.b)(t)}),r.setState({invalidPassword:n.createElement(b.a,{strKey:"loginInvalidPassword"})}),o=!1),o},r.generateOTP=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"otp_sent",a=arguments.length>3&&void 0!==arguments[3]&&arguments[3],o=arguments.length>4&&void 0!==arguments[4]&&arguments[4],i=r.state.userName,l=r.submitContainer,c=t.isLoginwithOTP,s=r.props,d=s.handleAPIRequest,f=s.changeViewHandler,m=s.toast,g=s.handleAPIError,b=s.styles,v=Object(p.h)(i)?"+91".concat(i):i,y=c?{loginId:v}:"loginId=".concat(v,"&state=").concat(e,"&churnEmailRequest=").concat(a);d(c?function(e){return Object(O.d)(e,o)}:function(e){return Object(O.c)(e,o)},y,(function(o){if(e!==w.a||a||r.generateOTP(e,{mobilePayload:o,churned:!0},n,!0),c&&!t.churned){var s=u()(o,"data.requestId");f({view:_.a.LOGIN_WITH_OTP,extra:{userName:i,loginWithOTPRequestId:s}})}else Object(V.e)(l,b.loading),f({view:_.a.VERIFICATION,extra:Object.assign({userName:i,payload:o,accountState:e,reactivate:e===w.c},t)});t.churned?m.show(j.verificationCodeSentToAllMsg,{userName:i,email:u()(o,["data","emailMask"])}):e!==w.a&&m.show(j.verificationCodeSentMsg,{userName:i})}),(function(e){var t,n=e;if((null===(t=null==n?void 0:n.error)||void 0===t?void 0:t.ERROR_CODE)!==G.a){if(c)n={error:{RESPONSE:{errorCode:u()(e,"error.errorCode"),message:u()(e,"error.message")}}};var a=u()(n,"error.RESPONSE.errorCode"),o=u()(n,"error.RESPONSE.message");return"LOGIN_1004"===a?f({view:_.a.MESSAGE_INFO,extra:{message:o}}):g(n)}var i=null==n?void 0:n.error;r.setState({challengeData:{appId:null==i?void 0:i.appId,jsClientSrc:null==i?void 0:i.jsClientSrc,vid:null==i?void 0:i.vid,uuid:null==i?void 0:i.uuid,blockScript:null==i?void 0:i.blockScript,flowName:"login"},showChallenge:!0})}),n,"",v)},r.onForgotPasswordClick=function(e,t){t&&t.preventDefault();var n=r.props,a=n.handleAPIRequest,o=n.handleAPIError,i=n.trackOmniture,l=n.pageType,c=n.loginSource,s=Object(p.h)(e)?"+91".concat(e):e;return a(h.b,{loginId:[s],supportAllStates:!0},(function(t){var n=u()(t,["data","userDetails",s],"");n===w.d||n===w.b?o("loginUnregisteredUserMsg"):(i("forgot_btn_clicked",{pageType:l,loginSource:c,loginId:Object(S.b)(e)}),r.generateOTP(n))}),o),!1},r.submitContainerRef=function(e){r.submitContainer=e},r.handleChangeUserNameClick=function(){(0,r.props.changeViewHandler)({view:_.a.SIGNUP,extra:{}})},r.handleSubmit=function(e){var t=r.state,a=t.userName,o=t.password,i=t.reactivate,l=r.props,c=l.handleAPIRequest,s=l.handleAPIError,d=l.changeViewHandler,f=l.styles,m=l.handleLoginSuccess,g=l.trackOmniture,v=l.pageType,h=l.loginSource,O=r.submitContainer,E=Object(p.h)(a)?w.p.MOBILE_PASSWORD:w.p.EMAIL_PASSWORD;return r.validateAllFields()&&(Object(p.h)(a)?g("login_mobile_entered",{pageType:v,loginSource:h}):g("login_email_entered",{pageType:v,loginSource:h}),Object(V.a)(O,f.loading),c(i?F.b:y.b,{loginId:Object(p.h)(a)?"+91".concat(a):a,password:o},(function(){Object(V.e)(O,f.loading),c(I.c),"function"==typeof m&&m(E)}),(function(e){Object(V.e)(O,f.loading);var t=u()(e,["error","RESPONSE","errorCode"]);if("LOGIN_1039"===t)d({view:_.a.SIGNUP,extra:{oldUserName:a,churned:!0}});else{if("LOGIN_1032"===t)return d({view:_.a.LOGIN,extra:{userName:a,password:o,disableOTPButton:!0,reactivate:!0}}),g("login_deactivated_user",{pageType:v,loginSource:h}),r.setState({reactivate:!0,credentialError:""});if("MAPI_0017"===t)return r.generateOTP(w.e,{password:o,unverified:!0},"new_otp_sent"),null;if("LOGIN_1003"===t)g("account_not_exists",{pageType:v,loginSource:h,loginId:Object(S.b)(a)}),d({view:_.a.SIGNUP,extra:{mobileNumber:Object(p.h)(a)?a:""}}),e="loginUnregisteredUserMsg";else{if("LOGIN_1012"===t)return g("invalid_login_details",{pageType:v,loginSource:h,loginId:Object(S.b)(a)}),r.setState({credentialError:n.createElement(b.a,{strKey:"loginInvalidCredentials"})}),null;"MAPI_0004"===t?"function"==typeof m&&m(E):"LOGIN_1011"===t?g("invalid_email_mobile",{pageType:v,loginSource:h,loginId:Object(S.b)(a)}):g("login_failed",{pageType:v,loginSource:h})}}return s(e)}),"login_success")),e&&e.preventDefault(),!1},r.handleLoginWithOTP=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];e&&e.preventDefault();var a=r.state,o=a.userName,i=a.password,l=r.props,c=l.pageType,s=l.loginSource,d=l.handleAPIRequest,f=l.changeViewHandler,m=l.handleAPIError,g=l.trackOmniture,v=Object(p.c)(o);if(v&&!Object(p.h)(o)||!v&&!Object(p.f)(o))r.props.trackOmniture((o||"").length>0?"invalid_email_mobile":"",{pageType:c,loginSource:s,loginId:Object(S.b)(o)}),r.setState({credentialError:n.createElement(b.a,{strKey:"loginInvalidUserName"})});else{var y=Object(p.h)(o)?"+91".concat(o):o;d(h.b,{loginId:[y],supportAllStates:!0},(function(e){var n=u()(e,["data","userDetails",y],"");if(n===w.d||n===w.b)f({view:_.a.SIGNUP,extra:{mobileNumber:Object(p.h)(o)?o:""}}),m("loginUnregisteredUserMsg");else if(n===w.a)f({view:_.a.LOGIN,extra:{userName:Object(p.h)(o)?o:"",disableOTPButton:!0}}),r.props.enableLoginPassword?m("loginChurnedUser"):m("loginChurnedUserNew");else{if(n===w.c)return f({view:_.a.LOGIN,extra:{userName:o,password:i,reactivate:!0,disableOTPButton:!0}}),g("login_deactivated_user",{pageType:c,loginSource:s}),r.props.enableLoginPassword?m("loginDeactivatedUser"):m("loginDeactivatedUserNew"),r.setState({reactivate:!0,credentialError:""});r.generateOTP(n,{isLoginwithOTP:!0},"login_otp_sent",!1,t)}}),(function(e){return m(e,"login_failed")}),"otp_request_btn_clicked")}},r.handleUserNameChange=function(e){return r.onTextChange({userName:(e||"").trim(),credentialError:""})},r.handlePasswordChange=function(e){return r.onTextChange({password:e,invalidPassword:""})},r.handleBtnCLick=function(e){r.props.viewType!==w.q&&r.props.changeViewHandler({view:_.a.SIGNUP},e)},r.handleReactivateClick=function(e,t){return function(a){a.preventDefault();var o=r.props,i=o.pageType,l=o.loginSource,c=t?Object(p.h)(e):Object(p.f)(e);return e&&c?r.onForgotPasswordClick(e,a):(r.props.trackOmniture((e||"").length>0?"invalid_email_mobile":"",{pageType:i,loginSource:l,loginId:Object(S.b)(e)}),r.setState({credentialError:n.createElement(b.a,{strKey:"loginInvalidUserName"})}),!1)}},r._onChallengeSuccess=function(){r.handleLoginWithOTP(void 0,!0),r.setState({showChallenge:!1})},r.state={userName:u()(e,["extra","userName"])||"",password:u()(e,["extra","password"])||"",reactivate:u()(e,["extra","reactivate"])||!1,disableOTPButton:u()(e,["extra","disableOTPButton"])||!1},r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&X(e,t)}(t,e),r=t,a=[{key:"UNSAFE_componentWillReceiveProps",value:function(e){u()(e,["extra","userName"])?this.setState({userName:e.extra.userName,reactivate:!1}):this.setState({userName:"",password:"",credentialError:"",invalidPassword:"",reactivate:!1})}},{key:"render",value:function(){var e,t,r,a=this.state,o=a.userName,l=a.credentialError,c=a.invalidPassword,s=a.password,u=a.reactivate,d=this.props,m=d.extra,y=d.styles,h=d.compactView,O=d.enableLoginPassword,E=Object(p.c)(o),S=/^\d{1,10}$/.test(o);return n.createElement("form",{key:"loginForm",onSubmit:this.handleSubmit,autoComplete:"on"},n.createElement(g.a,{captureAutoFill:!0,autoFocus:!h,prependInfo:S,value:o,readOnly:u||h,errorMsg:l,placeholder:n.createElement(b.a,{strKey:"loginPlaceHolderUserName"}),onTextChange:this.handleUserNameChange,className:y["form-input"],wrapperClass:i()(y["form-input-wrap"],(e={},t=y["has-error"],r=!!l,(t=W(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e)),appendInfo:h},S?n.createElement("span",{className:y["prepend-txt"]},"+91"):null,h?n.createElement("a",{className:i()(y["append-txt"],y["input-action-txt"]),onClick:this.handleChangeUserNameClick,tabIndex:-1},n.createElement(b.a,{strKey:"loginChangeUserNameTxt"})):null),O?n.createElement(g.a,{captureAutoFill:!0,type:"password",autoFocus:h,value:s,errorMsg:c,placeholder:n.createElement(b.a,{strKey:"loginPlaceHolderPassword"}),appendInfo:"true",onTextChange:this.handlePasswordChange,className:y["form-input"],wrapperClass:y["form-input-wrap"]},u?null:n.createElement("a",{className:i()(y["append-txt"],y["input-action-txt"]),onClick:this.handleReactivateClick(o,E),tabIndex:-1},n.createElement(b.a,{strKey:"loginForgotTxt"}))):null,n.createElement("div",{className:y["terms-text"]},"By continuing, you agree to Flipkart's"," ",n.createElement(P.a,{to:"/pages/terms",className:y["terms-color"],target:"_blank"},"Terms of Use")," ","and"," ",n.createElement(P.a,{to:"/pages/privacypolicy",className:y["terms-color"],target:"_blank"},"Privacy Policy"),"."),O?n.createElement("div",{ref:this.submitContainerRef,className:y["form-btn-wrap"]},n.createElement(f.a,{type:"submit",secondary:!0,className:y["submit-btn"]},n.createElement(v.a,{stroke:"#fff",className:y["loader-icon"]}),n.createElement(b.a,{strKey:u?"loginReactivateBtnTxt":"loginTitleTxt"}))):null,!m.disableOTPButton&&!h&&!u&&n.createElement("div",{className:y["login-otp-container"]},O?n.createElement("div",{className:y["login-otp-text"]},Object(b.d)("or")):null,this.state.challengeData&&this.state.showChallenge?n.createElement(B.a,{onSuccess:this._onChallengeSuccess,data:this.state.challengeData,dataKey:"pxLoginOtp"}):O?n.createElement(f.a,{className:i()(y["submit-btn"],y["white-btn"]),onClick:this.handleLoginWithOTP},Object(b.d)("loginOTPTitle")):n.createElement(f.a,{secondary:!0,className:y["submit-btn"],onClick:this.handleLoginWithOTP},Object(b.d)("loginOTPTitle"))),u||h?null:n.createElement("div",{className:y["login-new-user"]},n.createElement(f.a,{link:!0,href:w.t,onClick:this.handleBtnCLick},Object(b.d)("loginWithOTPNewUser"))))}}],a&&H(r.prototype,a),o&&H(r,o),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,a,o}(n.Component);z.defaultProps={extra:{},trackOmniture:function(){return null}};var J=r(506);function Y(e){return Y="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Y(e)}function ee(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,te(n.key),n)}}function te(e){var t=function(e,t){if("object"!=Y(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=Y(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Y(t)?t:t+""}function re(e,t,r){return t=ae(t),function(e,t){if(t&&("object"==Y(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,ne()?Reflect.construct(t,r||[],ae(e).constructor):t.apply(e,r))}function ne(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(ne=function(){return!!e})()}function ae(e){return ae=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},ae(e)}function oe(e,t){return oe=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},oe(e,t)}var ie=function(e){function t(e){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(r=re(this,t,[e])).onTextChange=function(e){r.setState(e)},r.handleChangeUserNameClick=function(){(0,r.props.changeViewHandler)({view:_.a.SIGNUP,extra:{}})},r.handleOTPChange=function(e){r.onTextChange({otp:e})},r.handleResendOTP=function(){var e=r.props,t=e.handleAPIRequest,n=e.toast,a=e.changeViewHandler,o=e.handleAPIError,i=u()(r.props,"extra.userName",""),l={loginId:Object(p.h)(i)?"+91".concat(i):i};t(O.d,l,(function(e){var t=u()(e,"data.requestId","");r.setState({loginWithOTPreqId:t}),n.show(j.verificationCodeSentMsg,{userName:i})}),(function(e){return"LOGIN_1004"===u()(e,["error","RESPONSE","errorCode"])?a({view:_.a.MESSAGE_INFO,extra:{message:e.error.RESPONSE.message}}):o(e)}),"loginwith_resend_otp_clicked","",i)},r.renderResendBtn=function(){var e=r.props.styles;return n.createElement("a",{href:"#",className:i()(e["input-action-txt"],e["append-txt"]),onClick:r.handleResendOTP,tabIndex:-1},n.createElement(b.a,{strKey:"loginResendOtpText"}))},r.renderOTPInput=function(){var e=r.props,t=e.compactView,a=e.styles,o=r.state.otp;return n.createElement(g.a,{onTextChange:r.handleOTPChange,placeholder:n.createElement(b.a,{strKey:"loginOTPPlaceholder"}),pattern:p.a,autoComplete:"on",autoFocus:!0,maxLength:"6",value:o,appendInfo:t,className:a["form-input"],wrapperClass:a["form-input-wrap"]},r.renderResendBtn())},r.handleLoginOTPSubmit=function(e){e&&e.preventDefault();var t=r.props,n=t.handleAPIRequest,a=t.handleAPIError,o=t.handleLoginSuccess,i=t.trackOmniture,l=t.pageType,c=t.loginSource,s=t.changeViewHandler,d=u()(r.state,"userName",""),f={userId:Object(p.h)(d)?"+91".concat(d):d,requestId:u()(r.state,"loginWithOTPreqId")||u()(r.props,"extra.payload.data.requestId"),otp:r.state.otp||""},m=Object(p.h)(d)?w.p.MOBILE_OTP:w.p.EMAIL_OTP;i("loginwith_otp_entered",{pageType:l,loginSource:c,loginId:Object(S.b)(d)}),n(J.b,f,(function(){"function"==typeof o&&o(m)}),(function(e){var t=u()(e,"error.errorCode"),r={error:{RESPONSE:{errorCode:t,message:u()(e,"error.message")}}};return"LOGIN_1011"===t?i("invalid_email_mobile",{pageType:l,loginSource:c,loginId:Object(S.b)(d)}):"LOGIN_1032"===t?(s({view:_.a.LOGIN,extra:{userName:d,reactivate:!0}}),i("login_deactivated_user",{pageType:l,loginSource:c})):"MAPI_0004"===t?"function"==typeof o&&o(m):"LOGIN_1008"===t?i("loginwith_otp_incorrect",{pageType:l,loginSource:c,loginId:Object(S.b)(d)}):(s({view:_.a.LOGIN,extra:{userName:d}}),i("login_failed",{pageType:l,loginSource:c})),a(r)}),"login_otp_success","",d)},r.state={userName:u()(e,["extra","userName"])||"",reactivate:u()(e,["extra","reactivate"])||!1,loginWithOTPreqId:u()(e,"extra.payload.data.requestId")},r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&oe(e,t)}(t,e),r=t,a=[{key:"UNSAFE_componentWillReceiveProps",value:function(e){u()(e,["extra","userName"])?this.setState({userName:e.extra.userName,reactivate:!1}):this.setState({userName:"",credentialError:"",reactivate:!1})}},{key:"render",value:function(){var e,t,r,a=this.state,o=a.userName,l=a.credentialError,c=a.reactivate,s=this.props,u=s.styles,p=s.compactView,d=/^\d{1,10}$/.test(o);return n.createElement("form",{key:"loginForm",onSubmit:this.handleLoginOTPSubmit,autoComplete:"on"},n.createElement(g.a,{captureAutoFill:!0,autoFocus:!p,prependInfo:d,value:o,readOnly:c||p,errorMsg:l,placeholder:n.createElement(b.a,{strKey:"loginPlaceHolderUserName"}),className:u["form-input"],wrapperClass:i()(u["form-input-wrap"],(e={},t=u["has-error"],r=!!l,(t=te(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e)),appendInfo:p},d?n.createElement("span",{className:u["prepend-txt"]},"+91"):null,n.createElement("a",{className:i()(u["append-txt"],u["input-action-txt"]),onClick:this.handleChangeUserNameClick,tabIndex:-1},n.createElement(b.a,{strKey:"loginChangeUserNameTxt"}))),this.renderOTPInput(),n.createElement("div",{className:u["terms-text"]},"By continuing, you agree to Flipkart's"," ",n.createElement(P.a,{to:"/pages/terms",className:u["terms-color"],target:"_blank"},"Terms of Use")," ","and"," ",n.createElement(P.a,{to:"/pages/privacypolicy",className:u["terms-color"],target:"_blank"},"Privacy Policy"),"."),n.createElement("div",{className:u["form-btn-wrap"]},n.createElement(f.a,{type:"submit",secondary:!0,className:u["submit-btn"]},n.createElement(v.a,{stroke:"#fff",className:u["loader-icon"]}),n.createElement(b.a,{strKey:c?"loginReactivateBtnTxt":"loginTitleTxt"}))))}}],a&&ee(r.prototype,a),o&&ee(r,o),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,a,o}(n.Component);ie.defaultProps={extra:{},trackOmniture:function(){return null}};var le=r(209),ce=r(565),se=r(36);function ue(e){return ue="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ue(e)}function pe(e,t,r){return(t=fe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function de(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,fe(n.key),n)}}function fe(e){var t=function(e,t){if("object"!=ue(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=ue(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==ue(t)?t:t+""}function me(e,t,r){return t=be(t),function(e,t){if(t&&("object"==ue(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,ge()?Reflect.construct(t,r||[],be(e).constructor):t.apply(e,r))}function ge(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(ge=function(){return!!e})()}function be(e){return be=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},be(e)}function ve(e,t){return ve=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},ve(e,t)}var ye=function(e){function t(e){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(r=me(this,t,[e])).onTextChange=function(e){r.setState(e)},r.handleOTPChange=function(e){var t=e.payloadKey,a=void 0===t?"payload":t,o=e.valueKey,i=void 0===o?"verificationCode":o,l=e.otpErrorKey,c=void 0===l?"otpError":l,s=e.verifiedState,f=void 0===s?"verified":s,m=e.churnEmailRequest;return function(e){var t,o=r.props,l=o.extra,s=o.changeViewHandler,g=o.trackOmniture,b=o.pageType,v=o.loginSource,y=o.handleAPIRequest,h=o.handleAPIError,O=r.state[i],w=u()(l,[a,"data","requestId"],""),E=u()(l,[a,"data","otpRegex"],""),P=new RegExp("".concat(E,"$"),"g");if(w&&O!==e&&P.test(e)){var N=Object(p.h)(l.userName)?"+91".concat(l.userName):l.userName;++r.count,O&&g(l.signup?"otp_entered_signup":"otp_entered_login",{pageType:b,loginSource:v,loginId:Object(S.b)(u()(l,"userName"))}),y(J.a,{otp:e,otpRequestId:w,loginId:N,churnEmailRequest:m},(function(){var e;r.count=0,r.setState((pe(e={},f,!0),pe(e,c,""),e))}),(function(e){g(l.signup?"new_otp_verification_failed":"otp_verification_failed",{pageType:b,loginSource:v,loginId:Object(S.b)(u()(l,"userName")),attempt:r.count});var t=u()(e,["error","RESPONSE","errorCode"]);return"LOGIN_1008"===t?r.setState(pe({},c,e.error.RESPONSE.message)):"LOGIN_1006"===t?s({view:_.a.MESSAGE_INFO,extra:{message:e.error.RESPONSE.message}}):"LOGIN_1007"===t?r.setState(pe({},c,n.createElement(d.a,{strKey:"loginOTPExpiredErrorMsg"}))):h(e)}),l.signup?"signup_otp_verified":"otp_verified")}r.onTextChange((pe(t={},i,e),pe(t,c,""),t))}},r.handleSubmit=function(e){if(e&&e.preventDefault(),!r.validateAllFields())return!1;var t=r.props,a=t.extra,o=void 0===a?{}:a,i=t.styles,l=t.handleLoginSuccess,c=t.trackOmniture,s=t.pageType,f=t.loginSource,m=t.handleAPIRequest,g=t.handleAPIError,b=r.state,v=b.verificationCode,y=b.emailVerificationCode,O=b.password,E=r.submitContainer,P=u()(o,"payload.data.requestId","");Object(V.a)(E,i.loading);var N=Object(p.h)(o.userName)?"+91".concat(o.userName):o.userName,T={loginId:N,otp:v,password:o.unverified?o.password:O,otpRequestId:P},_=ce.b;return o.signup?(_=h.a,T.emailId=o.emailId):o.unverified?_=le.d:o.churned&&(T.otpRequestId=u()(o,["mobilePayload","data","requestId"]),T.emailOtpRequestId=u()(o,["payload","data","requestId"]),T.emailOtp=y),m(_,T,(function(){m(I.c),"function"==typeof l&&l(w.p.EMAIL_PASSWORD)}),(function(e){Object(V.e)(E,i.loading);var t=u()(e,["error","RESPONSE","errorCode"]);return"LOGIN_1009"===t?r.setState({passwordError:e.error.RESPONSE.message}):"LOGIN_1062"===t?(c("loginverify_same_password",{pageType:s,loginSource:f,loginId:Object(S.b)(N)}),g(e,"")):"LOGIN_1007"===t?(c("loginverify_otp_expired",{pageType:s,loginSource:f,loginId:Object(S.b)(N)}),r.setState({otpError:n.createElement(d.a,{strKey:"loginOTPExpiredErrorMsg"})})):g(e,o.signup?"signup_failed":"login_failed")}),o.signup?"signup_success":"reset_pwd_success"),!1},r.handleRegenerateOTP=function(e){var t=e.churnEmailRequest,n=void 0!==t&&t,a=e.payloadKey,o=void 0===a?"payload":a,i=e.valueKey,l=void 0===i?"verificationCode":i,c=e.otpErrorKey,s=void 0===c?"otpError":c,d=e.verifiedState,f=void 0===d?"verified":d;return function(e){e&&e.preventDefault();var t=r.props,a=t.changeViewHandler,i=t.extra,c=t.toast,d=t.trackOmniture,m=t.pageType,g=t.loginSource,b=t.handleAPIRequest,v=t.handleAPIError,y=i.userName,h=i.accountState;r.count=0,d(i.signup?"signup_resend_otp_clicked":"resend_otp_clicked",{pageType:m,loginSource:g,loginId:Object(S.b)(y)});var w=Object(p.h)(y)?"+91".concat(y):y,E="loginId=".concat(w,"&state=").concat(h,"&churnEmailRequest=").concat(n);b(O.c,E,(function(e){var t;return n?c.show(j.verificationCodeSentMsg,{userName:u()(e,["data","emailMask"])}):c.show(j.verificationCodeSentMsg,{userName:y}),r.setState((pe(t={},f,!1),pe(t,s,""),pe(t,"passwordError",""),pe(t,l,""),t)),a({view:_.a.VERIFICATION,extra:Object.assign({},i,pe({},o,e))})}),v,i.signup?"new_otp_sent":"otp_sent","",w),e.preventDefault()}},r.submitContainerRef=function(e){r.submitContainer=e},r.handleBtnClick=function(e){return r.props.changeViewHandler({view:u()(r.props,["extra","signup"])?_.a.LOGIN:_.a.SIGNUP,extra:{}},e)},r.handleChangeUserNameClick=function(e){e.preventDefault();var t=r.props,n=t.compactView;(0,t.changeViewHandler)({view:u()(r.props,["extra","signup"])||n?_.a.SIGNUP:_.a.LOGIN,extra:{}})},r.handleUserNameChange=function(e){return e.replace(/\D+/g,"")},r.handlePasswordChange=function(e){return r.onTextChange({password:e,passwordError:""})},r.renderResendBtn=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=r.props,o=a.compactView,l=a.styles;return n.createElement("a",{href:"#",className:i()(l["input-action-txt"],pe({},l["pull-right"],!o&&!e),pe({},l["append-txt"],o||e)),onClick:r.handleRegenerateOTP(t),tabIndex:-1},n.createElement(d.a,{strKey:"loginResendOtpText"}))},r.renderOTPInputField=function(e){var t=e.payloadKey,a=e.verifiedState,o=void 0===a?"verified":a,l=e.churnEmailRequest,c=e.placeholderKey,s=void 0===c?"loginOTPPlaceholder":c,u=e.valueKey,f=void 0===u?"verificationCode":u,m=e.otpErrorKey,b=void 0===m?"otpError":m,v=e.churned,y=e.wrapperClass,h=e.autoFocus,O=void 0===h||h,w=r.props,E=w.compactView,S=w.styles,P=r.state,N=P[f],I=P[b],T=P[o];return n.createElement(g.a,{onTextChange:r.handleOTPChange({valueKey:f,otpErrorKey:b,payloadKey:t,verifiedState:o,churnEmailRequest:l}),placeholder:n.createElement(d.a,{strKey:s}),pattern:p.a,autoComplete:"on",autoFocus:O,maxLength:"6",value:N,readOnly:T,errorMsg:I,appendInfo:E||v||T,className:S["form-input"],wrapperClass:i()(y,S["form-input-wrap"])},T?n.createElement("span",{className:i()(S["success-otp"],S["append-txt"])},n.createElement(se.Q,null)):E||v?r.renderResendBtn(v,{churnEmailRequest:l,payloadKey:t,valueKey:f,otpErrorKey:b,verifiedState:o}):null)},r.validateAllFields=function(){var e=!0,t=r.props,a=t.extra,o=t.trackOmniture,i=t.pageType,l=t.loginSource,c=t.enableSignupPassword,s=r.state,p=s.verificationCode,f=s.emailVerificationCode,m=s.password,g=s.verified,b=s.emailVerified;return p&&g?!a.churned||f&&b||(r.setState({emailOtpError:n.createElement(d.a,{strKey:"loginInvalidOTP"})}),e=!1,o("otp_verification_failed_other",{pageType:i,loginSource:l,loginId:Object(S.b)(u()(a,"userName"))})):(r.setState({otpError:n.createElement(d.a,{strKey:"loginInvalidOTP"})}),e=!1,o("otp_verification_failed_other",{pageType:i,loginSource:l,loginId:Object(S.b)(u()(a,"userName"))})),c&&(a.unverified||m||(r.setState({passwordError:n.createElement(d.a,{strKey:"loginInvalidPassword"})}),e=!1)),e},r.count=0,r.state={verified:!1,password:"",mobileNumber:"",otpError:"",passwordError:"",verificationCode:""},r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&ve(e,t)}(t,e),r=t,(a=[{key:"render",value:function(){var e=this.props,t=e.extra,r=e.styles,a=e.compactView,o=e.enableSignupPassword,l=Object(p.c)(t?t.userName:""),c=u()(t,["payload","data","emailMask"],""),s=this.state,m=s.password,b=s.passwordError,y=s.emailOtpError,h=t.churned,O=h?"mobilePayload":"payload",w="loginTitleTxt";return t.signup?w="signupBtnTxt":t.unverified?w="loginVerifyBtnTxt":t.reactivate&&(w="loginReactivateBtnTxt"),n.createElement("form",{onSubmit:this.handleSubmit},n.createElement(g.a,{readOnly:!0,prependInfo:l,autoComplete:"username",value:t.userName||"",appendInfo:"true",onTextChange:this.handleUserNameChange,placeholder:n.createElement(d.a,{strKey:l?"loginVerificationMobilePlaceholderTxt":"loginVerificationEmailPlaceholderTxt"}),className:r["form-input"],wrapperClass:r["form-input-wrap"]},l?n.createElement("span",{className:r["prepend-txt"]},"+91"):null,n.createElement("a",{href:"#",className:i()(r["append-txt"],r["input-action-txt"]),onClick:this.handleChangeUserNameClick,tabIndex:-1},n.createElement(d.a,{strKey:"loginChangeUserNameTxt"}))),a||h?null:n.createElement("div",{className:r["verification-info-txt"]},n.createElement(d.a,{strKey:l?"loginOTPSentToMobileMsg":"loginOTPSentToEmailMsg"}),this.renderResendBtn()),this.renderOTPInputField(Object.assign({payloadKey:O,churned:h},h&&{placeholderKey:"loginMobileOTPPlaceholder"})),h&&n.createElement("div",null,this.renderOTPInputField({churnEmailRequest:!0,autoFocus:!1,verifiedState:"emailVerified",valueKey:"emailVerificationCode",otpErrorKey:"emailOtpError",placeholderKey:"loginEmailOTPPlaceholder",wrapperClass:r["churn-email-field"],churned:h}),n.createElement(d.a,{className:i()(r["churn-email-info"],pe({},r.error,!!y)),strKey:"loginEmailOTPInfoTxt",attributes:{email:c}})),o?t.unverified?null:n.createElement(g.a,{type:"password",value:m,onTextChange:this.handlePasswordChange,errorMsg:b,className:r["form-input"],wrapperClass:r["form-input-wrap"],placeholder:n.createElement(d.a,{strKey:"loginSetPasswordPlaceholder"})}):null,n.createElement("div",{ref:this.submitContainerRef,className:r["form-btn-wrap"]},n.createElement(f.a,{type:"submit",secondary:!0,className:r["submit-btn"]},n.createElement(v.a,{stroke:"#fff",className:r["loader-icon"]}),n.createElement(d.a,{strKey:w})),t.unverified||t.reactivate||a?null:n.createElement(f.a,{className:i()(r["submit-btn"],r["white-btn"],r["change-view-btn"]),onClick:this.handleBtnClick},t.signup?n.createElement(d.a,{strKey:"loginAlreadyHaveAccountBtnMsg"}):n.createElement(d.a,{strKey:"loginNewUserBtnMsg"}))))}}])&&de(r.prototype,a),o&&de(r,o),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,a,o}(n.Component);ye.defaultProps={extra:{payload:{data:{}}},trackOmniture:function(){return null}};var he=r(2029);function Oe(e){return Oe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Oe(e)}function we(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,Ee(n.key),n)}}function Ee(e){var t=function(e,t){if("object"!=Oe(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=Oe(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Oe(t)?t:t+""}function Se(e,t,r){return t=Ne(t),function(e,t){if(t&&("object"==Oe(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,Pe()?Reflect.construct(t,r||[],Ne(e).constructor):t.apply(e,r))}function Pe(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(Pe=function(){return!!e})()}function Ne(e){return Ne=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Ne(e)}function Ie(e,t){return Ie=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Ie(e,t)}var Te=function(e){function t(e){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(r=Se(this,t,[e])).handleOTPSubmit=function(e){var t=r.props,n=t.handleAPIRequest,a=t.handleAPIError,o=t.handleLoginSuccess,i=t.extra,l=t.trackOmniture,c=t.pageType,s=t.loginSource,d=t.changeViewHandler,f=u()(i,"userName",""),m={userId:Object(p.h)(f)?"+91".concat(f):f,requestId:u()(r.state,"requestId"),otp:e},g=Object(p.h)(f)?w.p.MOBILE_OTP:w.p.EMAIL_OTP;l("loginwith_otp_entered",{pageType:c,loginSource:s,loginId:Object(S.b)(f)}),n(J.b,m,(function(){n(I.c),"function"==typeof o&&o(g)}),(function(e){var t=u()(e,"error.errorCode"),r={error:{RESPONSE:{errorCode:t,message:u()(e,"error.message")}}};return"LOGIN_1011"===t?l("invalid_email_mobile",{pageType:c,loginSource:s,loginId:Object(S.b)(f)}):"LOGIN_1032"===t?(d({view:_.a.LOGIN,extra:{userName:f,reactivate:!0}}),l("login_deactivated_user",{pageType:c,loginSource:s})):"MAPI_0004"===t?"function"==typeof o&&o(g):"LOGIN_1008"===t?l("loginwith_otp_incorrect",{pageType:c,loginSource:s,loginId:Object(S.b)(f)}):(d({view:_.a.LOGIN,extra:{userName:f}}),l("login_failed",{pageType:c,loginSource:s})),a(r)}),"login_otp_success","",f)},r.handleResendOTP=function(){var e=r.props,t=e.handleAPIRequest,n=e.toast,a=e.changeViewHandler,o=e.handleAPIError,i=u()(r.props,"extra.userName",""),l={loginId:Object(p.h)(i)?"+91".concat(i):i};t(O.d,l,(function(e){var t=u()(e,"data.requestId","");r.setState({requestId:t}),n.show(j.verificationCodeSentMsg,{userName:i})}),(function(e){return"LOGIN_1004"===u()(e,["error","RESPONSE","errorCode"])?a({view:_.a.MESSAGE_INFO,extra:{message:e.error.RESPONSE.message}}):o(e)}),"loginwith_resend_otp_clicked","",i)},r.handleEditClick=function(e){var t=r.props,n=t.changeViewHandler,a=t.extra,o=(void 0===a?{}:a).userName;n({view:_.a.LOGIN,extra:{userName:o}},e)},r.handleChangeInOTP=function(e){if(e){var t=e.join("");he.a.test(t)&&r.handleOTPSubmit(t)}},r.state={requestId:u()(e,"extra.loginWithOTPRequestId","")},r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Ie(e,t)}(t,e),r=t,(a=[{key:"render",value:function(){var e=this.props.extra,t=(void 0===e?{}:e).userName,r=void 0===t?"":t;return n.createElement(n.Fragment,null,n.createElement(he.b,{userName:r,handleOTPSubmit:this.handleOTPSubmit,handleResendOTP:this.handleResendOTP,handleEdit:this.handleEditClick,handleChangeInOTP:this.handleChangeInOTP,showEditButton:!0}))}}])&&we(r.prototype,a),o&&we(r,o),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,a,o}(n.Component),_e=r(23),je=r(3588),xe=r.n(je);function Ce(e){return Ce="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ce(e)}function ke(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,Re(n.key),n)}}function Re(e){var t=function(e,t){if("object"!=Ce(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=Ce(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Ce(t)?t:t+""}function Le(e,t,r){return t=De(t),function(e,t){if(t&&("object"==Ce(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,Ae()?Reflect.construct(t,r||[],De(e).constructor):t.apply(e,r))}function Ae(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(Ae=function(){return!!e})()}function De(e){return De=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},De(e)}function Ke(e,t){return Ke=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Ke(e,t)}var Ue=function(e){function t(e){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(r=Le(this,t,[e])).trackFDP=function(e){_e.a.trackEvent({en:"LRE",erc:e.errorCode,iss:e.isSuccess,lid:e.loginId,fid:"WEBSITE-LOGIN"},!0)},r.trackFDPEvent=function(e,t){var r="login"===e.view?"SignIn":"SignUp";_e.a.trackEvent({en:"LRSE",ltp:e.loginSource,lt:r,lm:t,iid:_e.a.generateId()})},r.handleAPIRequest=function(e,t,n,a,o,i,l){var c=r.props.dispatch(e(t)),s=r.props,p=s.pageType,d=s.loginSource,f=t&&"object"===Ce(t)&&t.loginId||l;n&&a&&c.then((function(e){return o&&r.trackOmniture(o,{pageType:p,loginSource:d,loginId:Object(S.b)(f)}),r.trackFDP({errorCode:null,isSuccess:!0,loginId:f}),n(e)}),(function(e){i&&r.trackOmniture(i,{pageType:p,loginSource:d,loginId:Object(S.b)(f)});var t=u()(e,["error","statuscode"],null);return r.trackFDP({errorCode:t,isSuccess:!1,loginId:f}),a(e)}))},r.handleAPIError=function(e,t){return Object(T.f)(e,r.props.toast,t)},r.changeViewTo=function(e,t){var n=r.props,a=n.pageType,o=n.loginSource,i=e.view===_.a.SIGNUP?"show_signup_popup":"show_login_popup";return e.view!==_.a.VERIFICATION&&e.view!==_.a.LOGIN_WITH_OTP&&a!==w.n&&r.trackOmniture(i,{pageType:a,loginSource:o}),r.setState(e),t&&t.preventDefault(),!1},r.handleLoginSuccess=function(e){r.trackFDPEvent(r.props,e);var t=r.props.onLoginSuccess;"function"==typeof t?t():window.location.reload()},r.trackOmniture=function(e,t){c()(r.props.omnitureTrackingHelper,e,t)},r.state={view:e.view||_.a.LOGIN,extra:{}},r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Ke(e,t)}(t,e),r=t,(a=[{key:"componentDidMount",value:function(){var e=this.props,t=e.pageType,r=void 0===t?"":t,n=e.loginSource,a=void 0===n?"":n;if(r!==w.n){var o=this.props.view===_.a.SIGNUP?"Signup Displayed":"Login Displayed";Object(S.d)("custom",{prop21:this.props.view===_.a.SIGNUP?"".concat(r,"_").concat(a," Signup:Displayed"):"".concat(r,"_").concat(a," Login:Displayed"),events:"event12"},o)}}},{key:"UNSAFE_componentWillReceiveProps",value:function(e){return this.setState({view:e.view||"",extra:{}})}},{key:"render",value:function(){var e=this,t=this.state,r=t.view,a=t.extra,o=void 0===a?{}:a,l=this.props,c=l.toast,s=l.viewType,f=void 0===s?"":s,g=l.overrideStyles,b=l.titleKey,v=l.descKey,y=l.pageType,h=l.loginSource,O=l.className,E=l.enableLoginPassword,S=void 0!==E&&E,P=l.enableSignupPassword,N=void 0!==P&&P,I=l.enableCOOTPView,T=void 0!==I&&I,j=Object.assign({},xe.a,g),x=u()(this.state,["extra","signup"]),C=u()(this.state,["extra","reactivate"]),k=b||(x||"signup"===r?"signupTitleTxt":"loginTitleTxt"),R=f===w.o,L={handleAPIError:this.handleAPIError,handleAPIRequest:this.handleAPIRequest,extra:o,viewType:f,changeViewHandler:this.changeViewTo,toast:c,trackOmniture:this.trackOmniture,compactView:R,styles:j,handleLoginSuccess:this.handleLoginSuccess,pageType:y,loginSource:h,enableLoginPassword:S,enableSignupPassword:N},A=function(){switch(r){case _.a.MESSAGE_INFO:return n.createElement(m,{message:u()(e.state,["extra","message"]),styles:j});case _.a.SIGNUP:return n.createElement(M,L);case _.a.VERIFICATION:return n.createElement(ye,L);case _.a.LOGIN_WITH_OTP:return n.createElement(Te,L);default:return R&&T?n.createElement(ie,L):n.createElement(z,L)}};if(R&&y===w.n)return n.createElement("div",{className:j["form-view-container"]},A());var D=x||r===_.a.SIGNUP?"signupDesc":o.unverified?Object(p.h)(o.userName)?"verifyMobileDesc":"verifyEmailDesc":C?"reactivateDesc":"loginDesc";return n.createElement("div",{className:i()(j["login-widget"],"row",O)},n.createElement("div",{className:i()(j["left-container"],"col","col-2-5",xe.a["login-img"],this.props.leftContainerClass)},n.createElement("span",{className:j.title},n.createElement(d.a,{strKey:k})),n.createElement("p",{className:j.description},n.createElement(d.a,{strKey:v||D}))),n.createElement("div",{className:i()(j["form-view-container"],"col","col-3-5")},n.createElement("div",{className:j["form-wrapper"]},A())))}}])&&ke(r.prototype,a),o&&ke(r,o),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,a,o}(n.Component);Ue.defaultProps={viewType:"",omnitureTrackingHelper:S.d};t.default=Object(a.b)((function(e){return{enableLoginPassword:u()(e,"config.data.globalConfig.enableLoginPassword")||!1,enableSignupPassword:u()(e,"config.data.globalConfig.enableSignupPassword")||!1,enableCOOTPView:u()(e,"config.data.globalConfig.enableCOOTPView")||!1}}))(Object(N.d)(Ue))},2029:function(e,t,r){"use strict";r.d(t,"a",(function(){return P})),r.d(t,"b",(function(){return N}));var n=r(0),a=r(9),o=r.n(a),i=r(21),l=r.n(i),c=r(16),s=r(198),u=r(932),p=r(174),d=r(128),f=r(2050),m=r.n(f),g=r(148);function b(e){return b="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},b(e)}function v(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,y(n.key),n)}}function y(e){var t=function(e,t){if("object"!=b(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=b(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==b(t)?t:t+""}function h(e,t,r){return t=w(t),function(e,t){if(t&&("object"==b(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,O()?Reflect.construct(t,r||[],w(e).constructor):t.apply(e,r))}function O(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(O=function(){return!!e})()}function w(e){return w=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},w(e)}function E(e,t){return E=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},E(e,t)}var S=/^[0-9]{1}$/,P=/^[0-9]{6}$/,N=function(e){function t(e){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(r=h(this,t,[e])).timerLimt=15e3,r.handleEditClick=function(e){var t=r.props.handleEdit;"function"==typeof t&&t(e)},r.handleOtpPaste=function(e){if(e){e.preventDefault();var t=e.clipboardData||window.clipboardData,n=t&&t.getData("text");if(n&&P.test(n)){var a=n.split("");r.setState({otp:a,focusIndex:5})}}},r.handleOtpChange=function(e,t){var n=r.props.handleChangeInOTP,a=r.state.otp;a[t]=e,r.skipOnChange?r.setState({otp:a}):r.setState({otp:a,focusIndex:r.getFocusIndexBoundary(t+1)},(function(){"function"==typeof n&&n(a)}))},r.handleSubmit=function(e){e&&e.preventDefault();var t=r.state.otp,n=r.props.handleOTPSubmit,a=t.join("");"function"==typeof n&&n(a)},r.handleResendClick=function(){var e=r.props.handleResendOTP;"function"==typeof e&&(e(),r.setState({allowResend:!1}))},r.getFocusIndexBoundary=function(e){return e<0?0:e>5?5:e},r.handleKeyDown=function(e){return function(t){var n=r.state.otp,a=r.state;switch(t.keyCode){case p.a.backspace:if(r.skipOnChange=!0,""!==n[e]&&void 0!==n[e]){n[e]="",Object.assign(a,{otp:n,focusIndex:r.getFocusIndexBoundary(e)});break}Object.assign(a,{otp:n,focusIndex:r.getFocusIndexBoundary(e-1)});break;case p.a.left:Object.assign(a,{focusIndex:r.getFocusIndexBoundary(e-1)});break;case p.a.right:Object.assign(a,{focusIndex:r.getFocusIndexBoundary(e+1)});break;default:return void(r.skipOnChange=!1)}r.setState(a)}},r.onResendTimerComplete=function(){r.setState({allowResend:!0})},r.state={otp:[],focusIndex:0,allowResend:!1},r.skipOnChange=!1,r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&E(e,t)}(t,e),r=t,(a=[{key:"componentDidMount",value:function(){l.a.canUseDOM&&document.addEventListener("paste",this.handleOtpPaste)}},{key:"componentWillUnmount",value:function(){document.removeEventListener("paste",this.handleOtpPaste)}},{key:"render",value:function(){for(var e=this.props,t=e.userName,r=void 0===t?"":t,a=e.showEditButton,i=e.className,l=[],p=0;p<6;p++)l.push(n.createElement(u.a,{maxLength:1,key:p,id:p,wrapperClass:m.a["input-wrapper"],className:m.a.input,required:!0,autoFocus:p===this.state.focusIndex,value:this.state.otp[p],pattern:S,onKeyDown:this.handleKeyDown(p),onTextChange:this.handleOtpChange}));return n.createElement("div",{className:o()(m.a["login-otp-verification"],i)},n.createElement("div",null,Object(c.d)("loginOTPVerificationTitle")),n.createElement("div",null,r&&n.createElement("span",{className:m.a.username},r),a&&n.createElement(s.a,{link:!0,href:d.s,onClick:this.handleEditClick},Object(c.d)("changeButton"))),n.createElement("form",{onSubmit:this.handleSubmit},n.createElement("div",{className:m.a["input-container"]},l),n.createElement(s.a,{primary:!0,type:"submit",className:m.a["submit-btn"]},Object(c.d)("loginVerifyBtnTxt"))),n.createElement("div",{className:m.a["resend-container"]},Object(c.d)("loginOTPResend"),this.state.allowResend?n.createElement("span",{className:m.a.btn,onClick:this.handleResendClick},Object(c.d)("loginResendCode")):n.createElement("span",{className:m.a.timer},"00:",n.createElement(g.e,{timeRemaining:this.timerLimt,onExpiry:this.onResendTimerComplete},n.createElement(g.d,{padZeros:!0})))))}}])&&v(r.prototype,a),i&&v(r,i),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,a,i}(n.Component)},2050:function(e,t,r){e.exports={"login-otp-verification":"r6+Mxy",username:"E++Tdw","input-container":"XDRRi5","input-wrapper":"_3oB0MF",input:"IX3CMV","resend-container":"kZYA3m",btn:"rMF9Z9",timer:"sS0HD7","submit-btn":"llMuju","white-btn":"eK4UbI"}},3588:function(e,t,r){e.exports={"login-widget":"NXna7w","left-container":"Q+Pbkc",title:"KIOyzU",description:"FgTkdt","login-img":"MEHv7B","pull-right":"d2lmSf","info-container":"_26DeaW","info-title":"_2LM-Uv","info-msg":"ubEhLv","info-help-wrapper":"erYf6I","info-help-txt":"HKV2Re","info-contact-btn":"lh-pvG","loader-icon":"QGf3UH","form-info":"SgKrmp","form-success":"VMJS+Z","form-error":"_8+mUyB","info-desc":"qItIkG","input-action-txt":"hq6Srf","form-view-container":"Sm1-5F","verification-info-txt":"Df3aq1","success-otp":"WDL02o","prepend-txt":"kmEd+U","append-txt":"wED530","form-btn-wrap":"ZnP3aD",loading:"Q38kfT","terms-text":"EpHS0A","terms-color":"c9RDXR","form-input-wrap":"vLRlQb","form-input":"BV+Dqf","submit-btn":"twnTnD","white-btn":"OD+dVw","churn-email-info":"+dUWUg",error:"DSPrP1","churn-email-field":"s0cxH7","churned-icon":"_3j6V0Q","login-otp-container":"LSOAQH","login-otp-text":"_0teLzy","loging-otp-signup":"Q0c9Hv","login-new-user":"ZJ3AS1"}}}]);